<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>EventSender&lt; EvType &gt; Class Template Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>EventSender&lt; EvType &gt; Class Template Reference</h1><!-- doxytag: class="EventSender" --><code>#include &lt;<a class="el" href="EventSender_8h-source.html">EventSender.h</a>&gt;</code>
<p>

<p>
<a href="classEventSender-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="classListener.html">Listener</a>&lt; EvType &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEventSender.html#b1c06c87b4f68585d901e3509d6eaebc">TListener</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Simpler form of Listener&lt;EvType&gt;.  <a href="#b1c06c87b4f68585d901e3509d6eaebc"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEventSender.html#b4273d833fb8765c7b312de2f5cbc321">remove</a> (<a class="el" href="classListener.html">TListener</a> &amp;)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEventSender.html#e99a3d12cb65093365eb77b4e314f50c">add</a> (<a class="el" href="classListener.html">TListener</a> &amp;)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEventSender.html#f2a8ba57c8d17b434ef0beb0a3cde6cd">send</a> (const EvType &amp;)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEventSender.html#cf72b3e78142e5150b8dac509801714d">isSending</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEventSender.html#c069cf80851e7af399ce86c5796b2b16">hasListeners</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEventSender.html#62bc6bff204744ad001b4732368b5e18">getNumListeners</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEventSender.html#7360bbab0bfc08d32d142ff08c3f75c1">getMinNumIgnored</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEventSender.html#a2abd9285a1bc32198a0138d9d9a4f4a">Listener&lt; EvType &gt;</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">So Listener&lt;EvType&gt; can call register etc.  <a href="#a2abd9285a1bc32198a0138d9d9a4f4a"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classEventSender_1_1IllegalSendError.html">IllegalSendError</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;typename EvType&gt;<br>
 class EventSender&lt; EvType &gt;</h3>

Sender of events of type EvType. All public methods are static since there is only one <a class="el" href="structinstance.html">instance</a> of the sender. <a class="el" href="classEventSender.html">EventSender</a> maintains a registry of listeners who want to receive the events it sends.<p>
Usage:<ul>
<li>No instantiation needed (actually, none is possible)</li><li>Call <a class="el" href="classEventSender.html#e99a3d12cb65093365eb77b4e314f50c">add()</a> and <a class="el" href="classEventSender.html#b4273d833fb8765c7b312de2f5cbc321">remove()</a> to add/remove a listener to/from the registry. Only listeners in the registry receive events. If those two methods are called while a <a class="el" href="classEventSender.html#f2a8ba57c8d17b434ef0beb0a3cde6cd">send()</a> is already in progress (typically from within your <a class="el" href="classListener.html#74f3b0bd7ce5a9828f9950bca44e3554">Listener&lt;EvType&gt;::processEvent()</a>), the registrations/removals are queued and are enacted only once all listeners have received the event. This ensures the integrity of the registry during a <a class="el" href="classEventSender.html#f2a8ba57c8d17b434ef0beb0a3cde6cd">send()</a>.</li><li>Call <a class="el" href="classEventSender.html#f2a8ba57c8d17b434ef0beb0a3cde6cd">send()</a> on an event to send it to all registered listeners.</li><li>Call <a class="el" href="classEventSender.html#cf72b3e78142e5150b8dac509801714d">isSending()</a> to see whether or not EventSender&lt;EvType&gt; is currently doing a <a class="el" href="classEventSender.html#f2a8ba57c8d17b434ef0beb0a3cde6cd">send()</a> call (typically used from within your <a class="el" href="classListener.html#74f3b0bd7ce5a9828f9950bca44e3554">Listener&lt;EvType&gt;::processEvent()</a> to see whether sending another event of type EvType is safe).</li><li>Call <a class="el" href="classEventSender.html#62bc6bff204744ad001b4732368b5e18">getNumListeners()</a> to see how many listeners are currently registered. This number does not include listeners queued for registration or removal from registry.</li><li>Call <a class="el" href="classEventSender.html#7360bbab0bfc08d32d142ff08c3f75c1">getMinNumIgnored()</a> to see how many listeners have ignored the last event sent. If called during a <a class="el" href="classEventSender.html#f2a8ba57c8d17b434ef0beb0a3cde6cd">send()</a>, gives the current number. Regardless, this number is a minimum since listeners are not required to tell EventSender&lt;EvType&gt; that they are ignoring the received event.</li></ul>
<p>
An exception that gets thrown when <a class="el" href="classEventSender.html#f2a8ba57c8d17b434ef0beb0a3cde6cd">EventSender&lt;EvType&gt;::send()</a> is called recursively at least once. This situation is more likely in complex systems where events cause other events to be generated.<p>
An example scenario is where you <a class="el" href="classcreate.html" title="create create a ndw data element.">create</a> an Type1Event and call EventSender&lt;Type1Event&gt;::send(Type1Event). This call to <a class="el" href="classEventSender.html#f2a8ba57c8d17b434ef0beb0a3cde6cd">send()</a> in turn calls the processEvent() <a class="el" href="structmethod.html">method</a> of a listener of Type1Event's. If this listener's <a class="el" href="structmethod.html">method</a> creates another Type1Event and calls EventSender&lt;Type1Event&gt;::send(Type1Event) on it, this will cause that listener's processEvent() to be called once more, and the process repeats. This is likely to trigger an infinite loop of event generation. The only case where this would not happen is if the listener keeps state information that changes between successive calls to processEvent(), such that it does not generate an event during one of those calls (the recursion ends), or if this listener deregister's itself from listening.<p>
Since an infinite recursion is likely to cause a program crash, and since it is quite easy to make that kind of mistake, EventSender&lt;EvType&gt; forbids calling <a class="el" href="classEventSender.html#f2a8ba57c8d17b434ef0beb0a3cde6cd">send()</a> while a <a class="el" href="classEventSender.html#f2a8ba57c8d17b434ef0beb0a3cde6cd">send()</a> (for that event type) is in progress. It will throw a EventSender&lt;EvType&gt;::IllegalSendError if such a situation occurs.<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Oliver Schoenborn </dd></dl>
<dl class="since" compact><dt><b>Since:</b></dt><dd>Sept 2002 </dd></dl>

<p>Definition at line <a class="el" href="EventSender_8h-source.html#l00034">34</a> of file <a class="el" href="EventSender_8h-source.html">EventSender.h</a>.</p>
<hr><h2>Member Typedef Documentation</h2>
<a class="anchor" name="b1c06c87b4f68585d901e3509d6eaebc"></a><!-- doxytag: member="EventSender::TListener" ref="b1c06c87b4f68585d901e3509d6eaebc" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename EvType&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classListener.html">Listener</a>&lt;EvType&gt; <a class="el" href="classEventSender.html">EventSender</a>&lt; EvType &gt;::<a class="el" href="classListener.html">TListener</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Simpler form of Listener&lt;EvType&gt;. 
<p>

<p>Definition at line <a class="el" href="EventSender_8h-source.html#l00038">38</a> of file <a class="el" href="EventSender_8h-source.html">EventSender.h</a>.</p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="b4273d833fb8765c7b312de2f5cbc321"></a><!-- doxytag: member="EventSender::remove" ref="b4273d833fb8765c7b312de2f5cbc321" args="(TListener &amp;)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename EvType&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classEventSender.html">EventSender</a>&lt; EvType &gt;::remove           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classListener.html">TListener</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>listener</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Remove the <em>listener</em> from the registry. Does nothing if the listener is not in the registry. 
<p>Definition at line <a class="el" href="EventSender_8h-source.html#l00186">186</a> of file <a class="el" href="EventSender_8h-source.html">EventSender.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="e99a3d12cb65093365eb77b4e314f50c"></a><!-- doxytag: member="EventSender::add" ref="e99a3d12cb65093365eb77b4e314f50c" args="(TListener &amp;)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename EvType&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classEventSender.html">EventSender</a>&lt; EvType &gt;::add           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classListener.html">TListener</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>listener</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add the <em>listener</em> to the registry. Does nothing if the listener is already registered. 
<p>Definition at line <a class="el" href="EventSender_8h-source.html#l00196">196</a> of file <a class="el" href="EventSender_8h-source.html">EventSender.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="f2a8ba57c8d17b434ef0beb0a3cde6cd"></a><!-- doxytag: member="EventSender::send" ref="f2a8ba57c8d17b434ef0beb0a3cde6cd" args="(const EvType &amp;)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename EvType&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classEventSender.html">EventSender</a>&lt; EvType &gt;::send           </td>
          <td>(</td>
          <td class="paramtype">const EvType &amp;&nbsp;</td>
          <td class="paramname"> <em>event</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send the <em>event</em> to its listeners.<p>
<ul>
<li>Upon return, getNumIgnored() will have the number of listeners who have ignored the event.</li><li>If one of the called listeners calls registerListener or removeListener, the operation will be queued and processed only after the event has been sent to all listeners. This insures the integrity of the list of listeners during the <a class="el" href="classEventSender.html#f2a8ba57c8d17b434ef0beb0a3cde6cd">send()</a> process.</li><li>Throws an exception if called while another <a class="el" href="classEventSender.html#f2a8ba57c8d17b434ef0beb0a3cde6cd">send()</a> is taking place, see <a class="el" href="classEventSender_1_1IllegalSendError.html">IllegalSendError</a>. You can use <a class="el" href="classEventSender.html#cf72b3e78142e5150b8dac509801714d">isSending()</a> to test whether a send is taking place.</li><li>All other exceptions are caught</li></ul>
<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classEventSender_1_1IllegalSendError.html">IllegalSendError</a></em>&nbsp;</td><td></td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="EventSender_8h-source.html#l00166">166</a> of file <a class="el" href="EventSender_8h-source.html">EventSender.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="cf72b3e78142e5150b8dac509801714d"></a><!-- doxytag: member="EventSender::isSending" ref="cf72b3e78142e5150b8dac509801714d" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename EvType&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classEventSender.html">EventSender</a>&lt; EvType &gt;::isSending           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Is this event sender currently sending the event to its listeners? True if yes, false otherwise. 
<p>Definition at line <a class="el" href="EventSender_8h-source.html#l00176">176</a> of file <a class="el" href="EventSender_8h-source.html">EventSender.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="c069cf80851e7af399ce86c5796b2b16"></a><!-- doxytag: member="EventSender::hasListeners" ref="c069cf80851e7af399ce86c5796b2b16" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename EvType&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classEventSender.html">EventSender</a>&lt; EvType &gt;::hasListeners           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Are there listeners currently registered? If this returns false, creating and <a class="el" href="classEventSender.html#f2a8ba57c8d17b434ef0beb0a3cde6cd">send()</a>ing and event just wastes cpu cycles since no one will hear event. <dl class="return" compact><dt><b>Returns:</b></dt><dd>true if there are listeners in registry </dd></dl>

<p>Definition at line <a class="el" href="EventSender_8h-source.html#l00119">119</a> of file <a class="el" href="EventSender_8h-source.html">EventSender.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="62bc6bff204744ad001b4732368b5e18"></a><!-- doxytag: member="EventSender::getNumListeners" ref="62bc6bff204744ad001b4732368b5e18" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename EvType&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="classEventSender.html">EventSender</a>&lt; EvType &gt;::getNumListeners           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get how many listeners are currently registered. Note that if <a class="el" href="classEventSender.html#cf72b3e78142e5150b8dac509801714d">isSending()</a> is true, then this number does not take into account listeners that are queued for registration/removal. 
<p>Definition at line <a class="el" href="EventSender_8h-source.html#l00143">143</a> of file <a class="el" href="EventSender_8h-source.html">EventSender.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="7360bbab0bfc08d32d142ff08c3f75c1"></a><!-- doxytag: member="EventSender::getMinNumIgnored" ref="7360bbab0bfc08d32d142ff08c3f75c1" args="()" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename EvType&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="classEventSender.html">EventSender</a>&lt; EvType &gt;::getMinNumIgnored           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get how many listeners have ignored the event that is currently being sent and that they have received. This number is reset to 0 before every call to <a class="el" href="classEventSender.html#f2a8ba57c8d17b434ef0beb0a3cde6cd">send(const EvType&amp;)</a>. This number is a minimum, since a listener is not required to tell EventSender&lt;EvType&gt; that it is ignoring an event. 
<p>Definition at line <a class="el" href="EventSender_8h-source.html#l00132">132</a> of file <a class="el" href="EventSender_8h-source.html">EventSender.h</a>.</p>

</div>
</div><p>
<hr><h2>Friends And Related Function Documentation</h2>
<a class="anchor" name="a2abd9285a1bc32198a0138d9d9a4f4a"></a><!-- doxytag: member="EventSender::Listener&lt; EvType &gt;" ref="a2abd9285a1bc32198a0138d9d9a4f4a" args="" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename EvType&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classListener.html">Listener</a>&lt; EvType &gt;<code> [friend]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
So Listener&lt;EvType&gt; can call register etc. 
<p>

<p>Definition at line <a class="el" href="EventSender_8h-source.html#l00042">42</a> of file <a class="el" href="EventSender_8h-source.html">EventSender.h</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>src/include/<a class="el" href="EventSender_8h-source.html">EventSender.h</a><li>src/server/<a class="el" href="EventSender_8cpp-source.html">EventSender.cpp</a><li>src/server/<a class="el" href="EventSender2_8cpp-source.html">EventSender2.cpp</a><li>src/server/server/<a class="el" href="server_2EventSender_8cpp-source.html">EventSender.cpp</a><li>src/server/server/<a class="el" href="server_2EventSender2_8cpp-source.html">EventSender2.cpp</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Jan 10 23:50:23 2011 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
